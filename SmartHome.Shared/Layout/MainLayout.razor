@inherits LayoutComponentBase

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Home</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>
<body>
    <!-- Vertical Sidebar -->
    <div class="flex min-h-screen ">
        <aside class="@sidebarClass hidden md:block text-white fixed h-full transition-all duration-300 ease-in-out" style="background-color: #120126;">
            <div class="p-4">
                <!-- Collapse Toggle -->
                <div class="flex justify-start mb-4">
                   
                    <button @onclick="ToggleSidebar" class="text-white">
                        <i class="fas fa-@(isCollapsed ? "chevron-right" : "chevron-left")"></i>
                    </button>

                    <span class="ml-3 @(isCollapsed ? "hidden" : "block")">Smart Home</span>
                </div>

                <!-- Menu Items -->
                <nav class="space-y-4">
                    <NavLink href="/" class="flex items-center p-2 hover:bg-gray-700 rounded-lg">
                        <i class="bi bi-columns-gap text-xl w-8"></i>
                        <span class="ml-3 @(isCollapsed ? "hidden" : "block")">Overview</span>
                    </NavLink>

                    <NavLink href="/Counter" class="flex items-center p-2 hover:bg-gray-700 rounded-lg">
                        <i class="fas fa-list text-xl w-8"></i>
                        <span class="ml-3 @(isCollapsed ? "hidden" : "block")">Logs</span>
                    </NavLink>

                    <NavLink href="/Weather" class="flex items-center p-2 hover:bg-gray-700 rounded-lg">
                        <i class="fas fa-chart-bar text-xl w-8"></i>
                        <span class="ml-3 @(isCollapsed ? "hidden" : "block")">Dashboard</span>
                    </NavLink>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-grow @mainContentClass md-ml-0 transition-all duration-200" style="background-color:#F0F4F8;">
            <!-- Horizontal Navbar -->
            <nav class="" style="background-color: #F9F9F9;">
                <div class="mx-auto px-4">
                    <div class="flex justify-between items-center h-16">
                        <!-- Left Section (Weather on Desktop) -->
                        <div class="hidden md:flex items-center space-x-2 " style="color:#FBB03B;">
                            <i class="fas fa-cloud-sun text-xl"></i>
                            <span class="text-black">28°C</span>
                        </div>

                        <!-- Mobile Menu Button -->
                        <button @onclick="ToggleMobileMenu" class="md:hidden text-gray-600">
                            <i class="fas fa-bars text-xl"></i>
                        </button>

                        <!-- Center Logo -->
                        @* <span class="text-xl font-bold text-gray-800">Smart Home</span> *@

                        <!-- Right Section (User & Notifications) -->
                        <div class="flex items-center space-x-4">
                            <button class="text-gray-600 relative">
                                <i class="fas fa-bell text-xl"></i>
                                <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                            </button>
                            <div class="flex items-center space-x-2">
                                <img src="_content/SmartHome.Shared/imgs/Profile-Main.webp"
                                     class="w-8 h-8 rounded-full"
                                     alt="User Avatar">
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <article class="content px-4">
                @Body
            </article>
        </main>
    </div>

    <!-- Mobile Menu (Popup) -->
    @if (showMobileMenu)
    {
        <div class="fixed inset-0 z-50 bg-black bg-opacity-50" @onclick="ToggleMobileMenu">
            <div class="bg-white w-3/4 h-full p-4 transform transition-transform">
                <nav class="space-y-4">
                    <NavLink href="/" class="block p-2 hover:bg-gray-100">OverView</NavLink>
                    <NavLink href="/Counter" class="block p-2 hover:bg-gray-100">Logs</NavLink>
                    <NavLink href="/Weather" class="block p-2 hover:bg-gray-100">Dashboard</NavLink>
                </nav>
            </div>
        </div>
    }
</body>
</html>

@code {
    private bool isCollapsed = true;
    private bool showMobileMenu = false;

    private string sidebarClass => isCollapsed ? "w-16" : "w-64";
    private string mainContentClass => isCollapsed ? "ml-0 md:ml-16 lg:ml-16" : "ml-0 md:ml-64 lg:ml-64";

    private void ToggleSidebar() => isCollapsed = !isCollapsed;
    private void ToggleMobileMenu() => showMobileMenu = !showMobileMenu;
}