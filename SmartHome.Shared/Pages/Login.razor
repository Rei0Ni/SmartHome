@page "/login"
@layout AuthLayout

<div class="logo">
    <img src="_content/SmartHome.Shared/imgs/logoSmart.png" alt="logo" />
</div>

<div class="text">
    Login
</div>
<form>
    <div class="data">
        <label>User Name</label>
        <input type="text" placeholder="username" @bind="username">
        @if (!string.IsNullOrEmpty(usernameErrorMessage))
        {
            <p class="error-message">@usernameErrorMessage</p>
        }
    </div>
    <div class="data">
        <label>Password</label>
        <input type="password" placeholder="password" @bind="password">
        @if (!string.IsNullOrEmpty(passwordErrorMessage)) 
        {
            <p class="error-message">@passwordErrorMessage</p>
        }
    </div>
    <div class="forgot-pass">
        <a href="#">Forgot Password?</a>
    </div>
    <div class="LoginBtn">
        <button @onclick="HandleLogin" type="button">Sign in</button>
    </div>
</form>

@code {
    private string username;
    private string password;
    private string usernameErrorMessage;
    private string passwordErrorMessage;

    private void HandleLogin()
    {
        usernameErrorMessage = null;  // Clear previous error messages
        passwordErrorMessage = null;

        if (string.IsNullOrWhiteSpace(username))
        {
            ShowUsernameError("Please fill user name.");
        }
        if (string.IsNullOrWhiteSpace(password))
        {
            ShowPasswordError("Please fill password.");
        }

        // Remember to handle API call in this location
    }

    private void ShowUsernameError(string message)
    {
        usernameErrorMessage = message;
    }

    private void ShowPasswordError(string message)
    {
        passwordErrorMessage = message;
    }
}
